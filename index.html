<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hex + Opacity Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 30px;
      max-width: 400px;
      margin: auto;
      background-color: #f9f9f9;
      color: #333;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      font-weight: 600;
    }
    input[type="color"],
    input[type="range"],
    input[type="text"],
    button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 20px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .output {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .preview {
      width: 100%;
      height: 60px;
      border-radius: 6px;
      border: 1px solid #ddd;
      margin-bottom: 10px;
    }
    .copy-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    .copy-btn:hover {
      background-color: #45a049;
    }
    .opacity-value {
      float: right;
    }
  </style>
</head>
<body>

  <h2>ðŸŽ¨ Hex + Opacity Generator</h2>

  <label>Select Color:</label>
  <input type="color" id="colorPicker" value="#497FB0" />

  <label>Opacity: <span class="opacity-value" id="opacityDisplay">100%</span></label>
  <input type="range" id="opacitySlider" min="0" max="100" value="100" />

  <label>Or Enter Full Color Code (with opacity):</label>
  <input type="text" id="codeInput" placeholder="#497FB0FF" maxlength="9" />

  <div class="output" id="result">Final Color: #497FB0FF</div>
  <div class="preview" id="previewBox"></div>

  <button class="copy-btn" onclick="copyColor()">ðŸ“‹ Copy Color Code</button>

  <script>
    const colorPicker = document.getElementById('colorPicker');
    const opacitySlider = document.getElementById('opacitySlider');
    const resultEl = document.getElementById('result');
    const previewBox = document.getElementById('previewBox');
    const opacityDisplay = document.getElementById('opacityDisplay');
    const codeInput = document.getElementById('codeInput');

    const opacityMap = {
      100: 'FF', 99: 'FC', 98: 'FA', 97: 'F7', 96: 'F5', 95: 'F2', 94: 'F0', 93: 'ED',
      92: 'EB', 91: 'E8', 90: 'E6', 89: 'E3', 88: 'E0', 87: 'DE', 86: 'DB', 85: 'D9',
      84: 'D6', 83: 'D4', 82: 'D1', 81: 'CF', 80: 'CC', 79: 'C9', 78: 'C7', 77: 'C4',
      76: 'C2', 75: 'BF', 74: 'BD', 73: 'BA', 72: 'B8', 71: 'B5', 70: 'B3', 69: 'B0',
      68: 'AD', 67: 'AB', 66: 'A8', 65: 'A6', 64: 'A3', 63: 'A1', 62: '9E', 61: '9C',
      60: '99', 59: '96', 58: '94', 57: '91', 56: '8F', 55: '8C', 54: '8A', 53: '87',
      52: '85', 51: '82', 50: '80', 49: '7D', 48: '7A', 47: '78', 46: '75', 45: '73',
      44: '70', 43: '6E', 42: '6B', 41: '69', 40: '66', 39: '63', 38: '61', 37: '5E',
      36: '5C', 35: '59', 34: '57', 33: '54', 32: '52', 31: '4F', 30: '4D', 29: '4A',
      28: '47', 27: '45', 26: '42', 25: '40', 24: '3D', 23: '3B', 22: '38', 21: '36',
      20: '33', 19: '30', 18: '2E', 17: '2B', 16: '29', 15: '26', 14: '24', 13: '21',
      12: '1F', 11: '1C', 10: '1A', 9: '17', 8: '14', 7: '12', 6: '0F', 5: '0D',
      4: '0A', 3: '08', 2: '05', 1: '03', 0: '00'
    };

    const reverseOpacityMap = Object.fromEntries(
      Object.entries(opacityMap).map(([k, v]) => [v.toUpperCase(), parseInt(k)])
    );

    function updateColor() {
      const hex = colorPicker.value.replace('#', '');
      const opacity = parseInt(opacitySlider.value);
      const alpha = opacityMap[opacity];
      const finalColor = `#${hex}${alpha}`;
      resultEl.textContent = `Final Color: ${finalColor}`;
      previewBox.style.backgroundColor = finalColor;
      opacityDisplay.textContent = `${opacity}%`;
      codeInput.value = finalColor;
    }

    function updateFromInput() {
      let val = codeInput.value.trim();
      if (!val.startsWith('#') || (val.length !== 9 && val.length !== 7)) return;
      val = val.replace('#', '');
      const hex = val.substring(0, 6);
      let alpha = val.length === 8 ? val.substring(6).toUpperCase() : 'FF';

      colorPicker.value = `#${hex}`;
      opacitySlider.value = reverseOpacityMap[alpha] ?? 100;
      updateColor();
    }

    function copyColor() {
      const text = resultEl.textContent.replace('Final Color: ', '');
      navigator.clipboard.writeText(text).then(() => {
        alert(`Copied: ${text}`);
      });
    }

    colorPicker.addEventListener('input', updateColor);
    opacitySlider.addEventListener('input', updateColor);
    codeInput.addEventListener('input', updateFromInput);

    // Initialize
    updateColor();
  </script>

</body>
</html>
